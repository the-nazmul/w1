:root {
  --bg: #f8f6f2;
  --paper: #faf9f6;
  --text: #18160e;
  --muted: #7a7568;
  --faint: #c8c4b8;
  --rule: rgba(24, 22, 14, 0.1);
  --rule-mid: rgba(24, 22, 14, 0.16);
  --accent: #8b1a0e;
  --blue: #1e3458;
  --female: #a44a3d;
  --male: #35557f;
  --wrap: 820px;
  --pad: clamp(18px, 4vw, 36px);
  --serif: "Cormorant Garamond", "Palatino Linotype", Georgia, serif;
  --body: "Newsreader", "Iowan Old Style", "Palatino Linotype", Georgia, serif;
  --mono: "JetBrains Mono", "Courier New", monospace;
  --topbar-h: 46px;
  --progress-h: 3px;
}

*, *::before, *::after {
  box-sizing: border-box;
}

html {
  -webkit-font-smoothing: antialiased;
}

body {
  margin: 0;
  min-height: 100vh;
  padding-top: calc(var(--topbar-h) + var(--progress-h));
  color: var(--text);
  background: radial-gradient(circle at 12% -8%, #fcfbf7 0%, var(--bg) 52%, #f2efe8 100%);
  font: 400 16.5px/1.78 var(--body);
}

.topbar {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 1000;
  border-bottom: 1px solid var(--rule-mid);
  background: color-mix(in srgb, var(--paper) 94%, transparent);
  backdrop-filter: blur(6px);
}

.topbar__inner {
  max-width: calc(var(--wrap) + (var(--pad) * 2));
  margin: 0 auto;
  height: var(--topbar-h);
  padding: 0 var(--pad);
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.topbar__name,
.topbar__link {
  text-decoration: none;
}

.topbar__actions {
  position: relative;
  display: flex;
  align-items: center;
}

.topbar__name {
  color: var(--text);
  font: 500 1rem/1.1 var(--serif);
  letter-spacing: 0.04em;
}

.topbar__link {
  color: var(--muted);
  font: 400 10.5px/1 var(--mono);
  letter-spacing: 0.1em;
  text-transform: uppercase;
}

.topbar__link:hover {
  color: var(--text);
}

.topbar__share-btn {
  border: 1px solid var(--rule-mid);
  background: #f2eee7;
  color: var(--muted);
  font: 400 10px/1 var(--mono);
  letter-spacing: 0.1em;
  text-transform: uppercase;
  cursor: pointer;
  padding: 8px 10px;
}

.topbar__share-btn:hover,
.topbar__share-btn[aria-expanded="true"] {
  color: var(--text);
}

.topbar__share-menu {
  position: absolute;
  top: calc(100% + 8px);
  right: 0;
  z-index: 1010;
  display: flex;
  flex-direction: column;
  gap: 6px;
  padding: 8px;
  border: 1px solid var(--rule-mid);
  background: color-mix(in srgb, var(--paper) 97%, transparent);
  box-shadow: 0 10px 24px rgba(24, 22, 14, 0.12);
}

.topbar__share-menu[hidden] {
  display: none;
}

.topbar__share-icon {
  width: 30px;
  height: 30px;
  border: 1px solid var(--rule-mid);
  background: #f2eee7;
  color: var(--muted);
  text-decoration: none;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font: 500 11px/1 var(--mono);
  letter-spacing: 0.03em;
}

.topbar__share-icon:hover {
  color: var(--text);
}

.topbar__share-icon--copy {
  cursor: pointer;
}

.scroll-progress {
  position: fixed;
  top: var(--topbar-h);
  left: 0;
  right: 0;
  z-index: 999;
  height: var(--progress-h);
  background: color-mix(in srgb, var(--rule-mid) 50%, transparent);
}

.scroll-progress__bar {
  width: 0;
  height: 100%;
  background: linear-gradient(90deg, var(--blue) 0%, var(--accent) 100%);
  transition: width 80ms linear;
}

.article {
  max-width: var(--wrap);
  margin: 0 auto;
  padding: 46px var(--pad) 80px;
}

.kicker {
  margin: 0;
  color: var(--muted);
  font: 400 10px/1.3 var(--mono);
  letter-spacing: 0.16em;
  text-transform: uppercase;
}

h1 {
  margin: 8px 0 0;
  font-family: var(--serif);
  font-size: clamp(2.1rem, 5.2vw, 3.4rem);
  font-style: italic;
  font-weight: 400;
  line-height: 1.06;
  letter-spacing: 0.01em;
}

.kicker,
h1,
.feature-art,
.feature-art__image {
  max-width: 1000px;
}

.dek {
  margin: 14px 0 0;
  max-width: 66ch;
  color: var(--muted);
  font-size: 15px;
  line-height: 1.65;
}

.feature-art {
  margin: 16px 0 12px;
}

.feature-art__image {
  display: block;
  width: 100%;
  max-width: 1000px;
  border: 1px solid var(--rule-mid);
  background: var(--paper);
}

.feature-art__caption {
  margin: 8px 0 0;
  color: var(--muted);
  font: 400 10px/1.5 var(--mono);
  letter-spacing: 0.08em;
  text-transform: uppercase;
}

.meta {
  margin: 10px 0 30px;
  color: var(--muted);
  font: 400 10.5px/1.5 var(--mono);
  letter-spacing: 0.08em;
  text-transform: uppercase;
}

.dot {
  margin: 0 8px;
  color: var(--faint);
}

code {
  font-family: var(--mono);
  font-size: 0.82em;
  color: color-mix(in srgb, var(--text) 76%, var(--muted));
}

.article p a,
.article li a {
  color: color-mix(in srgb, var(--text) 82%, var(--accent) 18%);
  text-decoration: underline;
  text-decoration-color: color-mix(in srgb, var(--accent) 45%, transparent);
  text-underline-offset: 3px;
  text-decoration-thickness: 1px;
  transition: color 160ms ease, text-decoration-color 160ms ease;
}

.article p a:visited,
.article li a:visited {
  color: color-mix(in srgb, #5f2a24 70%, var(--text));
  text-decoration-color: color-mix(in srgb, #5f2a24 45%, transparent);
}

.article p a:hover,
.article li a:hover {
  color: var(--accent);
  text-decoration-color: var(--accent);
}

.article p a:active,
.article li a:active {
  color: var(--text);
  text-decoration-color: var(--text);
}

.article p a:focus-visible,
.article li a:focus-visible {
  outline: 1px solid color-mix(in srgb, var(--accent) 68%, transparent);
  outline-offset: 2px;
}

.viz-card {
  margin: 0 0 26px;
  padding: 20px;
  border: 1px solid var(--rule-mid);
  background: var(--paper);
}

.viz-head {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 14px;
}

h2 {
  margin: 0;
  font-family: var(--serif);
  font-size: clamp(1.35rem, 2.3vw, 1.72rem);
  font-weight: 500;
  line-height: 1.2;
}

.method {
  margin: 12px 0 20px;
  color: var(--muted);
  font-size: 13.5px;
  line-height: 1.6;
}

.control-group {
  border: 1px solid var(--rule-mid);
  display: inline-flex;
  align-items: stretch;
}

.control-btn {
  border: 0;
  border-right: 1px solid var(--rule-mid);
  background: #f2eee7;
  color: var(--muted);
  cursor: pointer;
  font: 400 10px/1 var(--mono);
  letter-spacing: 0.08em;
  text-transform: uppercase;
  padding: 9px 11px;
}

.control-btn:last-child {
  border-right: 0;
}

.control-btn:hover {
  color: var(--text);
}

.control-btn.is-active {
  background: var(--text);
  color: #f7f5ef;
}

.chart {
  display: grid;
  gap: 14px;
}

.compare-row {
  display: grid;
  grid-template-columns: 110px 1fr 132px;
  grid-template-areas: "party track value";
  align-items: center;
  gap: 12px;
}

.compare-party {
  grid-area: party;
  font: 500 1rem/1 var(--serif);
  letter-spacing: 0.02em;
}

.compare-track,
.dist-track {
  width: 100%;
  height: 14px;
  border: 1px solid var(--rule);
  background: #efebe1;
  overflow: hidden;
}

.compare-track {
  grid-area: track;
}

.compare-fill,
.dist-bar,
.dist-segment {
  width: 0;
  transition: width 650ms cubic-bezier(0.21, 1, 0.27, 1);
}

.compare-fill {
  height: 100%;
}

.compare-fill--bnp {
  background: linear-gradient(90deg, #35557f 0%, var(--blue) 100%);
}

.compare-fill--jamaat {
  background: linear-gradient(90deg, #b75a4c 0%, var(--accent) 100%);
}

.compare-value {
  grid-area: value;
  text-align: right;
}

.compare-value strong,
.dist-value strong {
  display: block;
  font: 500 0.95rem/1.2 var(--body);
}

.compare-value span,
.dist-value span {
  color: var(--muted);
  font: 400 10px/1.45 var(--mono);
  letter-spacing: 0.06em;
  text-transform: uppercase;
}

.legend {
  display: flex;
  gap: 16px;
  flex-wrap: wrap;
  margin: 12px 0 18px;
}

.legend__item {
  color: var(--muted);
  font: 400 10px/1 var(--mono);
  letter-spacing: 0.08em;
  text-transform: uppercase;
  display: inline-flex;
  align-items: center;
  gap: 7px;
}

.swatch {
  width: 18px;
  height: 10px;
  border: 1px solid color-mix(in srgb, var(--text) 20%, transparent);
}

.swatch--female {
  background: linear-gradient(90deg, #bb7265 0%, var(--female) 100%);
}

.swatch--male {
  background: linear-gradient(90deg, #4f6d94 0%, var(--male) 100%);
}

.dist-row {
  display: grid;
  grid-template-columns: 110px 1fr 150px;
  grid-template-areas:
    "party track value"
    ". meta meta";
  align-items: center;
  column-gap: 12px;
  row-gap: 8px;
}

.dist-party {
  grid-area: party;
  font: 500 1rem/1 var(--serif);
}

.dist-track {
  grid-area: track;
  height: 16px;
}

.dist-bar {
  display: flex;
  height: 100%;
}

.dist-segment {
  height: 100%;
}

.dist-segment--female {
  background: linear-gradient(90deg, #bb7265 0%, var(--female) 100%);
}

.dist-segment--male {
  background: linear-gradient(90deg, #4f6d94 0%, var(--male) 100%);
}

.dist-value {
  grid-area: value;
  text-align: right;
}

.dist-meta {
  grid-area: meta;
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.dist-chip {
  border: 1px solid var(--rule);
  background: #f4f1ea;
  color: var(--muted);
  font: 400 10px/1 var(--mono);
  letter-spacing: 0.05em;
  text-transform: uppercase;
  padding: 5px 8px;
}

.dist-chip em {
  font-style: normal;
  color: var(--text);
}

.caption {
  margin: 6px 0 0;
  color: var(--muted);
  font-size: 13px;
  line-height: 1.6;
}

.caption .accent {
  color: var(--accent);
}

.chart-empty {
  margin: 0;
  color: var(--muted);
  font-size: 13px;
  line-height: 1.6;
}

.error {
  margin-top: 10px;
  border: 1px solid #d2b8b3;
  background: #fff7f5;
  color: #7d2e24;
  padding: 10px 12px;
  font-size: 13px;
}

@media (max-width: 760px) {
  body {
    font-size: 16px;
  }

  .topbar__share-btn {
    padding: 8px 9px;
  }

  .viz-card {
    padding: 16px;
  }

  .viz-head {
    flex-direction: column;
    align-items: flex-start;
  }

  .compare-row {
    grid-template-columns: 1fr auto;
    grid-template-areas:
      "party value"
      "track track";
    row-gap: 7px;
  }

  .dist-row {
    grid-template-columns: 1fr auto;
    grid-template-areas:
      "party value"
      "track track"
      "meta meta";
    row-gap: 7px;
  }

  .dist-party,
  .compare-party {
    font-size: 1.05rem;
  }
}

.data-head {
  align-items: center;
}

.download-link {
  color: var(--accent);
  border: 1px solid var(--rule-mid);
  background: #f2eee7;
  text-decoration: none;
  font: 400 10px/1 var(--mono);
  letter-spacing: 0.08em;
  text-transform: uppercase;
  padding: 9px 11px;
}

.download-link:hover {
  color: var(--text);
}

.table-wrap {
  border: 1px solid var(--rule-mid);
  background: #f4f1ea;
  overflow: auto;
}

.raw-table {
  width: max-content;
  min-width: 100%;
  border-collapse: collapse;
  font: 400 11px/1.45 var(--mono);
  letter-spacing: 0.01em;
}

.raw-table th,
.raw-table td {
  border-right: 1px solid var(--rule);
  border-bottom: 1px solid var(--rule);
  padding: 7px 9px;
  text-align: left;
  white-space: nowrap;
  vertical-align: top;
}

.raw-table th {
  position: sticky;
  top: 0;
  z-index: 1;
  background: #eee9df;
  color: var(--text);
  font-weight: 400;
  text-transform: uppercase;
  letter-spacing: 0.06em;
  font-size: 9.5px;
}

.raw-table tr:last-child td {
  border-bottom: 0;
}

.raw-table th:last-child,
.raw-table td:last-child {
  border-right: 0;
}

.pagination {
  margin-top: 12px;
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  gap: 6px;
  font-family: var(--mono);
}

.page-btn {
  border: 1px solid var(--rule-mid);
  background: #f2eee7;
  color: var(--muted);
  font: 400 10px/1 var(--mono);
  letter-spacing: 0.05em;
  text-transform: uppercase;
  padding: 7px 9px;
  cursor: pointer;
}

.page-btn:hover {
  color: var(--text);
}

.page-btn.is-active {
  background: var(--text);
  color: #f7f5ef;
}

.page-btn:disabled {
  opacity: 0.45;
  cursor: not-allowed;
}

.page-ellipsis {
  color: var(--muted);
  font: 400 10px/1 var(--mono);
  padding: 0 2px;
}

@media (max-width: 760px) {
  .download-link {
    width: 100%;
    text-align: center;
  }

  .raw-table {
    font-size: 10px;
  }
}

.article > .meta,
.article > .dek,
.article > .byline {
  max-width: 68ch;
  margin-left: 0;
  margin-right: 0;
}

.article > p {
  max-width: 68ch;
  margin-left: auto;
  margin-right: auto;
}

.article > .kicker,
.article > h1,
.article > .feature-art,
.article > .share {
  margin-left: 0;
  margin-right: 0;
}

.lead-paragraph::first-letter {
  font-family: var(--serif);
  font-size: 1.6em;
  line-height: 1;
  font-weight: 500;
}

.byline {
  margin: 14px 0 10px;
  color: var(--muted);
  font: 400 10.5px/1.5 var(--mono);
  letter-spacing: 0.08em;
  text-transform: uppercase;
}

.byline strong {
  color: var(--text);
  font-weight: 400;
}

.share {
  margin: 0 0 12px;
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 7px;
}

.share__label {
  color: var(--muted);
  font: 400 10px/1 var(--mono);
  letter-spacing: 0.08em;
  text-transform: uppercase;
  margin-right: 2px;
}

.share__link,
.share__btn {
  border: 1px solid var(--rule-mid);
  background: #f2eee7;
  color: var(--muted);
  font: 400 10px/1 var(--mono);
  letter-spacing: 0.08em;
  text-transform: uppercase;
  text-decoration: none;
  padding: 7px 9px;
}

.share__btn {
  cursor: pointer;
}

.share__link:hover,
.share__btn:hover {
  color: var(--text);
}

.share__feedback {
  min-width: 56px;
  color: var(--muted);
  font: 400 10px/1 var(--mono);
  letter-spacing: 0.05em;
  text-transform: uppercase;
}

.text-link {
  color: color-mix(in srgb, var(--text) 82%, var(--accent) 18%);
  text-decoration: underline;
  text-decoration-color: color-mix(in srgb, var(--accent) 42%, transparent);
  text-underline-offset: 3px;
  text-decoration-thickness: 1px;
  transition: color 180ms ease, text-decoration-color 180ms ease;
}

.text-link:visited {
  color: color-mix(in srgb, #5f2a24 72%, var(--text));
  text-decoration-color: color-mix(in srgb, #5f2a24 45%, transparent);
}

.text-link:hover {
  color: var(--accent);
  text-decoration-color: var(--accent);
}

.text-link:active {
  color: var(--text);
  text-decoration-color: var(--text);
}

.footnotes {
  margin-top: 36px;
  padding-top: 18px;
  border-top: 1px solid var(--rule-mid);
}

.footnotes-list {
  margin: 12px 0 0;
  padding-left: 18px;
  max-width: 68ch;
}

.footnotes-list li {
  color: var(--muted);
  margin-bottom: 10px;
}

.footnote-ref {
  font-family: var(--mono);
  font-size: 0.72em;
  vertical-align: super;
  line-height: 0;
}

.footnote-ref a {
  color: var(--accent);
  text-decoration: none;
}

.footnote-ref a:hover {
  text-decoration: underline;
}

.footnote-backlink {
  margin-left: 6px;
  color: var(--accent);
  text-decoration: none;
  font: 400 10px/1 var(--mono);
}

.footnote-backlink:hover {
  text-decoration: underline;
}
